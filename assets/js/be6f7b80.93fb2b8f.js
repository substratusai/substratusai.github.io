"use strict";(self.webpackChunksubstratus_website=self.webpackChunksubstratus_website||[]).push([[895],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),u=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(i.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(a),d=r,k=c["".concat(i,".").concat(d)]||c[d]||m[d]||o;return a?n.createElement(k,l(l({ref:t},p),{},{components:a})):n.createElement(k,l({ref:t},p))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[c]="string"==typeof e?e:r,l[1]=s;for(var u=2;u<o;u++)l[u]=a[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},83:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var n=a(7462),r=(a(7294),a(3905));a(2389);const o={sidebar_position:1},l="Local - Kind",s={unversionedId:"quickstart/local-kind",id:"quickstart/local-kind",title:"Local - Kind",description:"In this quickstart guide, you will install Substratus into a Kubernetes cluster running on your local machine and deploy a small (125 million parameter) Open Source LLM.",source:"@site/docs/quickstart/local-kind.md",sourceDirName:"quickstart",slug:"/quickstart/local-kind",permalink:"/docs/quickstart/local-kind",draft:!1,editUrl:"https://github.com/substratusai/substratusai.github.io/tree/main/docs/quickstart/local-kind.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Quickstart",permalink:"/docs/category/quickstart"},next:{title:"GCP - Google Cloud",permalink:"/docs/quickstart/gcp"}},i={},u=[{value:"Required Tools",id:"required-tools",level:2},{value:"Setup",id:"setup",level:2},{value:"Deploy LLM",id:"deploy-llm",level:2},{value:"Talk to your LLM!",id:"talk-to-your-llm",level:2},{value:"Cleanup",id:"cleanup",level:2}],p={toc:u},c="wrapper";function m(e){let{components:t,...a}=e;return(0,r.kt)(c,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"local---kind"},"Local - Kind"),(0,r.kt)("p",null,"In this quickstart guide, you will install Substratus into a Kubernetes cluster running on your local machine and deploy a small (125 million parameter) Open Source LLM."),(0,r.kt)("h2",{id:"required-tools"},"Required Tools"),(0,r.kt)("p",null,"Make sure you have the following tools installed and up to date."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://kind.sigs.k8s.io/docs/user/quick-start/#installation"},"kind")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/tasks/tools/#kubectl"},"kubectl"))),(0,r.kt)("h2",{id:"setup"},"Setup"),(0,r.kt)("p",null,"Create a local Kubernetes cluster using Kind."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"kind create cluster --name substratus --config - <<EOF\napiVersion: kind.x-k8s.io/v1alpha4\nkind: Cluster\nnodes:\n- role: control-plane\n  extraPortMappings:\n  - containerPort: 30080\n    hostPort: 30080\nEOF\n")),(0,r.kt)("p",null,"Install Substratus."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f https://raw.githubusercontent.com/substratusai/substratus/main/install/kind/manifests.yaml\n")),(0,r.kt)("h2",{id:"deploy-llm"},"Deploy LLM"),(0,r.kt)("p",null,"Because Substratus is deployed on your local machine, you can use the (relatively-tiny) Facebook OPT 125M model (125 million parameters) from HuggingFace."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: substratus.ai/v1\nkind: Model\nmetadata:\n  namespace: default\n  name: facebook-opt-125m\nspec:\n  image: substratusai/model-loader-huggingface\n  params:\n    name: facebook/opt-125m\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f https://raw.githubusercontent.com/substratusai/substratus/main/examples/facebook-opt-125m/base-model.yaml\n")),(0,r.kt)("p",null,"The model is now being downloaded from HuggingFace into local storage.\nYou can apply the following Server manifest to deploy the Model once it is imported."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: substratus.ai/v1\nkind: Server\nmetadata:\n  name: facebook-opt-125m\nspec:\n  image: substratusai/model-server-basaran\n  model:\n    name: facebook-opt-125m\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f https://raw.githubusercontent.com/substratusai/substratus/main/examples/facebook-opt-125m/base-server.yaml\n")),(0,r.kt)("p",null,"You can check on the progress of both processes using the following command."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl get ai\n")),(0,r.kt)("p",null,"When the Server reports a ",(0,r.kt)("inlineCode",{parentName:"p"},"Ready")," status, proceed to the next section to test it out."),(0,r.kt)("h2",{id:"talk-to-your-llm"},"Talk to your LLM!"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"125 million parameters is not much in the world of LLMs. Expect some whacky answers to your prompts!")),(0,r.kt)("p",null,"In order to access the model for exploratory purposes, forward ports from within the cluster to your local machine."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl port-forward service/facebook-opt-125m-server 8080:8080\n")),(0,r.kt)("p",null,"All substratus Servers ship with an API and interactive frontend. Open up your browser to ",(0,r.kt)("a",{parentName:"p",href:"http://localhost:8080/"},"http://localhost:8080/")," and talk to your model! Alternatively, request text generation via the OpenAI compatible HTTP API:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl http://localhost:8080/v1/completions \\\n  -H "Content-Type: application/json" \\\n  -d \'{ \\\n    "model": "facebook-opt-125m", \\\n    "prompt": "Who was the first president of the United States? ", \\\n    "max_tokens": 10\\\n  }\'\n')),(0,r.kt)("p",null,"The process that is serving the model can be stopped by simply deleting the same Server object that was applied before."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl delete server facebook-opt-125m\n")),(0,r.kt)("h2",{id:"cleanup"},"Cleanup"),(0,r.kt)("p",null,"Delete the local cluster."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"kind delete cluster --name substratus\n")),(0,r.kt)("p",null,"If you are interested in continuing your journey through Substratus, take a look at the ",(0,r.kt)("a",{parentName:"p",href:"../category/guides"},"guides")," to learn how to finetune models with your own dataset and much more!"),(0,r.kt)("p",null,"To learn more about how Substratus works, check out the ",(0,r.kt)("a",{parentName:"p",href:"/docs/overview"},"Overview")," page."))}m.isMDXComponent=!0}}]);