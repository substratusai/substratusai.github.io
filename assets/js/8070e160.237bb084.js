"use strict";(self.webpackChunksubstratus_website=self.webpackChunksubstratus_website||[]).push([[651],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var o=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,o,a=function(e,t){if(null==e)return{};var r,o,a={},n=Object.keys(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var u=o.createContext({}),i=function(e){var t=o.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=i(e.components);return o.createElement(u.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var r=e.components,a=e.mdxType,n=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=i(r),h=a,m=p["".concat(u,".").concat(h)]||p[h]||d[h]||n;return r?o.createElement(m,s(s({ref:t},c),{},{components:r})):o.createElement(m,s({ref:t},c))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=r.length,s=new Array(n);s[0]=h;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[p]="string"==typeof e?e:a,s[1]=l;for(var i=2;i<n;i++)s[i]=r[i];return o.createElement.apply(null,s)}return o.createElement.apply(null,r)}h.displayName="MDXCreateElement"},2257:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>d,frontMatter:()=>n,metadata:()=>l,toc:()=>i});var o=r(7462),a=(r(7294),r(3905));const n={sidebar_position:2},s="Quickstart",l={unversionedId:"quickstart",id:"quickstart",title:"Quickstart",description:"In this quickstart guide, you will install Substratus into a Google Cloud Platform project. Then you'll explore how Substratus can be used to build and deploy Open Source LLMs.",source:"@site/docs/quickstart.md",sourceDirName:".",slug:"/quickstart",permalink:"/docs/quickstart",draft:!1,editUrl:"https://github.com/substratusai/substratusai.github.io/tree/main/docs/quickstart.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/docs/"},next:{title:"Walkthrough",permalink:"/docs/category/walkthrough"}},u={},i=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install Substratus",id:"install-substratus",level:2},{value:"Build and Deploy an Open Source Model",id:"build-and-deploy-an-open-source-model",level:2},{value:"Testing out the Model Server",id:"testing-out-the-model-server",level:2},{value:"Cleanup",id:"cleanup",level:2}],c={toc:i},p="wrapper";function d(e){let{components:t,...r}=e;return(0,a.kt)(p,(0,o.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"quickstart"},"Quickstart"),(0,a.kt)("p",null,"In this quickstart guide, you will install Substratus into a Google Cloud Platform project. Then you'll explore how Substratus can be used to build and deploy Open Source LLMs."),(0,a.kt)("p",null,"NOTE: Support for AWS (",(0,a.kt)("a",{parentName:"p",href:"https://github.com/substratusai/substratus/issues/12"},"GitHub Issue #12"),") and Azure (",(0,a.kt)("a",{parentName:"p",href:"https://github.com/substratusai/substratus/issues/63"},"GitHub Issue #63"),") is planned. Give those issues a thumbs up if you would like to see them prioritized."),(0,a.kt)("div",{class:"video-container"},(0,a.kt)("iframe",{class:"video",src:"https://www.youtube.com/embed/dQw4w9WgXcQ",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0})),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"You will need a ",(0,a.kt)("a",{parentName:"p",href:"https://console.cloud.google.com/"},"Google Cloud Platform")," project with billing enabled."),(0,a.kt)("p",null,"Run the commands below to make sure you have the required tools."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"docker version || open 'https://docs.docker.com/get-docker/'\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"gcloud version || open 'https://cloud.google.com/sdk/docs/install'\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"gke-gcloud-auth-plugin --version || gcloud components install gke-gcloud-auth-plugin\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl version --client || open 'https://kubernetes.io/docs/tasks/tools/#kubectl'\n")),(0,a.kt)("h2",{id:"install-substratus"},"Install Substratus"),(0,a.kt)("p",null,"Create a substratus GKE cluster along with supporting infrastructure (buckets, service accounts, image registries)."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -it \\\n  -v ${HOME}/.kube:/root/.kube \\\n  -e PROJECT=$(gcloud config get project) \\\n  -e TOKEN=$(gcloud auth print-access-token) \\\n  substratusai/installer gcp-up.sh\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"kubectl")," should now be pointing at the substratus cluster."),(0,a.kt)("h2",{id:"build-and-deploy-an-open-source-model"},"Build and Deploy an Open Source Model"),(0,a.kt)("p",null,"To keep this quick, we'll use a small model (125 million parameters)."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f https://raw.githubusercontent.com/substratusai/substratus/main/examples/facebook-opt-125m/model.yaml\n")),(0,a.kt)("p",null,"A container build process is now running in the Substratus cluster. Let's also deploy the built model by applying a ModelServer manifest. ModelServer should start serving shortly after the Model build finishes (~3 minutes)."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f https://raw.githubusercontent.com/substratusai/substratus/main/examples/facebook-opt-125m/server.yaml\n")),(0,a.kt)("p",null,"You can check on the progress of both processes using a single command."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl get ai\n")),(0,a.kt)("p",null,"When the ModelServer reports a ",(0,a.kt)("inlineCode",{parentName:"p"},"Ready")," status, proceed to the next section to test it out."),(0,a.kt)("h2",{id:"testing-out-the-model-server"},"Testing out the Model Server"),(0,a.kt)("p",null,"The way every company chooses to expose a model will be different. In most cases models are integrated into other business applications and are rarely exposed directly to the Internet. By default, substratus will only serve the model within the Kubernetes cluster (with a Kubernetes ",(0,a.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/services-networking/service/"},"Service")," object). From here, it's up to you to expose the model to a wider network (e.g., the internal VPC network or the Internet) via annotated Service or Ingress objects."),(0,a.kt)("p",null,"In order to access the model for exploratory purposes, forward ports from within the cluster to your local machine."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl port-forward service/facebook-opt-125m-modelserver 8080:8080\n")),(0,a.kt)("p",null,"All substratus ModelServers ship with an API and interactive frontend. Open up your browser to ",(0,a.kt)("a",{parentName:"p",href:"http://localhost:8080/"},"http://localhost:8080/")," and talk to your model! Alternatively, request text generation via the HTTP API:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},' curl http://localhost:8080/v1/completions \\\n  -H "Content-Type: application/json" \\\n  -d \'{ \\\n    "model": "facebook-opt-125m", \\\n    "prompt": "The quick brown fox ", \\\n    "max_tokens": 30, \\\n    "temperature": 0 \\\n  }\'\n  # choices[0].text will very different\n{"id":"cmpl-2d4c8871b20dc45e6ac98322","object":"text_completion","created":1688628294,"model":"facebook-opt-125m","choices":[{"text":"I\'ve read Patrick Beut, Richard Eichel, Elliot Gagn\xe9","index":0,"logprobs":null,"finish_reason":"length"}],"usage":{"prompt_tokens":1,"completion_tokens":16,"total_tokens":17}}\n')),(0,a.kt)("p",null,"If you are interested in continuing your journey through Substratus, take a look at the ",(0,a.kt)("a",{parentName:"p",href:"./category/walkthrough"},"Guided Walkthrough"),"."),(0,a.kt)("h2",{id:"cleanup"},"Cleanup"),(0,a.kt)("p",null,"The process that is serving the model can be stopped by simply deleting the same ModelServer object that was applied before."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl delete -f https://raw.githubusercontent.com/substratusai/substratus/main/examples/facebook-opt-125m/server.yaml\n")),(0,a.kt)("p",null,"If you want to uninstall the entire Substratus system and all infrastructure, you can run the ",(0,a.kt)("inlineCode",{parentName:"p"},"gcp-down.sh")," script from the installation container."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -it \\\n  -e PROJECT=$(gcloud config get project) \\\n  -e TOKEN=$(gcloud auth print-access-token) \\\n  substratusai/installer gcp-down.sh\n")),(0,a.kt)("p",null,"To learn more about how Substratus works, check out the ",(0,a.kt)("a",{parentName:"p",href:"./architecture"},"Architecture")," page."))}d.isMDXComponent=!0}}]);